# SQL编辑器更新日志

## 版本说明

本文档记录了SQL编辑器的所有版本更新信息，包括新功能、改进、修复和已知问题。

---

## [v1.1.0] - 2025-01-XX

### 🎉 多标签页版本发布

这是SQL编辑器的重大更新版本，新增了多标签页支持，大幅提升了工作效率。

### ✨ 新功能

#### 多标签页支持
- **标签页管理**: 支持同时打开多个SQL文件，每个文件在独立标签页中编辑
- **新建标签页**: 通过Ctrl+N或菜单快速创建新标签页
- **智能关闭**: 关闭标签页时自动检查未保存更改并提示保存
- **拖拽排序**: 支持拖拽标签页改变顺序
- **按钮新建**: 标签栏右侧的+按钮，直观易用的新建标签页方式
- **修改标识**: 未保存文件的标签页显示*标记
- **文件隔离**: 每个标签页的撤销/重做操作相互独立

#### 增强的文件操作
- **打开到新标签页**: 打开文件时自动在新标签页中显示
- **独立保存**: 每个标签页可以独立保存，支持另存为功能
- **智能标题**: 窗口标题显示当前活动标签页的文件路径

---

## [v1.0.0] - 2025-01-XX

### 🎉 首次发布

这是SQL编辑器的首个正式版本，提供了完整的SQL编辑和格式化功能。

### ✨ 新功能

#### 核心编辑功能
- **SQL语法高亮**: 支持75+个SQL关键字的智能高亮显示
  - 关键字高亮（蓝色）
  - 字符串高亮（红色）
  - 注释高亮（绿色）
- **行号显示**: 左侧行号区域，支持动态宽度调整
- **深色主题**: 护眼的深色编辑界面
- **等宽字体**: 使用Consolas字体，确保代码对齐

#### SQL处理功能
- **SQL格式化**: 基于sqlparse的专业SQL格式化
  - 关键字自动大写
  - 智能缩进和换行
  - 操作符周围添加空格
  - 逗号前置格式
  - 去除多余空白
- **Java代码转换**: SQL与Java StringBuffer代码双向转换
  - SQL转Java格式
  - Java格式转回SQL
  - 自动处理引号转义
- **参数填充**: 批量替换SQL中的?占位符
  - 支持逗号分隔的参数输入
  - 参数数量验证
  - 自动添加单引号

#### 高级功能
- **查找替换**: 功能强大的查找替换对话框
  - 实时高亮所有匹配项
  - 正则表达式支持
  - 大小写敏感选项
  - 批量替换功能
  - 非模态对话框设计
- **注释对齐**: 智能对齐Java代码中的注释
  - Tab转空格（4个空格）
  - 智能计算最佳对齐位置
  - 支持单行注释(//)
- **代码模板填充**: 自定义模板批量生成代码
  - 支持{0}, {1}等占位符
  - 多行模板支持
  - Tab分隔数据处理

#### 文件操作
- **文件管理**: 完整的文件操作支持
  - 打开文件（Ctrl+O）
  - 保存文件（Ctrl+S）
  - 另存为功能
- **智能编码**: 自动文件编码检测
  - UTF-8优先检测
  - GBK/GB18030备选
  - chardet自动检测
  - 错误处理和提示

#### 用户体验
- **撤销重做**: 完整的撤销重做支持
  - 多步撤销（Ctrl+Z）
  - 多步重做（Ctrl+Y）
  - 复合操作支持
- **快捷键**: 丰富的快捷键支持
  - 文件操作快捷键
  - 编辑功能快捷键
  - 工具功能快捷键
- **菜单系统**: 完整的菜单栏设计
  - 文件菜单
  - 编辑菜单
  - 工具菜单
  - 帮助菜单

### 🔧 技术特性

#### 架构设计
- **模块化架构**: 清晰的模块分离设计
  - SQLFormatterApp: 主应用程序
  - CodeEditor: 代码编辑器组件
  - SQLHighlighter: 语法高亮器
  - FindReplaceDialog: 查找替换对话框
- **事件驱动**: 基于Qt信号槽机制
- **性能优化**: 针对大文件的性能优化

#### 技术栈
- **GUI框架**: PySide6 6.9.1+
- **Python版本**: 3.13+
- **SQL解析**: sqlparse 0.4.4
- **编码检测**: chardet 5.2.0

#### 平台支持
- **Windows**: Windows 10/11 完全支持
- **macOS**: macOS 10.14+ 支持
- **Linux**: Ubuntu 18.04+ 支持

### 📚 文档

#### 完整文档体系
- **用户手册**: 详细的使用指南和功能说明
- **技术文档**: 架构设计和技术实现详解
- **API文档**: 完整的开发者接口参考
- **安装指南**: 详细的安装和配置说明
- **更新日志**: 版本更新记录

#### 快捷键参考
| 功能 | 快捷键 | 说明 |
|------|--------|------|
| 打开文件 | Ctrl+O | 打开SQL文件 |
| 保存文件 | Ctrl+S | 保存当前文件 |
| 格式化SQL | Ctrl+F | 美化SQL代码 |
| 转换Java格式 | Ctrl+J | SQL转Java代码 |
| 从Java转回SQL | Ctrl+K | Java代码转SQL |
| 查找替换 | Ctrl+H | 打开查找替换 |
| 填充参数 | Ctrl+P | 替换?占位符 |
| 对齐注释 | Ctrl+L | 对齐代码注释 |
| 代码填充 | Ctrl+M | 模板代码生成 |
| 撤销 | Ctrl+Z | 撤销操作 |
| 重做 | Ctrl+Y | 重做操作 |
| 关于 | F1 | 显示关于信息 |

### 🐛 已知问题

#### 轻微问题
- 在某些Linux发行版上，字体渲染可能略有差异
- 极大文件（>10MB）的语法高亮可能有轻微延迟
- 复杂嵌套SQL的格式化结果可能需要手动调整

#### 限制说明
- 目前仅支持标准SQL语法，不支持特定数据库的扩展语法
- Java代码转换功能主要针对StringBuffer格式
- 正则表达式功能依赖Python re模块的语法

### 📋 系统要求

#### 最低要求
- Python 3.13+
- 512MB RAM
- 100MB 磁盘空间
- 1024x768 分辨率

#### 推荐配置
- Python 3.13+
- 2GB RAM
- 500MB 磁盘空间
- 1920x1080 分辨率

### 🚀 安装方式

#### 从源码安装
```bash
git clone <repository-url>
cd sapfront-tools
pip install -r requirements.txt
python main.py
```

#### Windows批处理启动
```bash
# 双击运行
start_sql_formatter.bat
```

### 👥 开发团队

- **主要开发者**: 刘忠亮
- **邮箱**: zhongliang.liu@lixil.com
- **开发时间**: 2025年

### 📄 许可证

本项目仅供学习与内部使用，禁止商业用途。

---

## 未来版本规划

### [v1.1.0] - 计划中

#### 🎯 计划新功能
- **多标签页支持**: 同时编辑多个SQL文件
- **代码折叠**: 支持SQL代码块的折叠和展开
- **自动补全**: SQL关键字和表名的智能补全
- **代码片段**: 预定义的SQL代码片段库
- **主题切换**: 支持多种编辑器主题

#### 🔧 计划改进
- **性能优化**: 进一步优化大文件处理性能
- **语法支持**: 扩展对更多数据库方言的支持
- **用户体验**: 改进界面布局和交互设计
- **国际化**: 支持多语言界面

#### 🐛 计划修复
- 修复已知的字体渲染问题
- 优化语法高亮的性能
- 改进复杂SQL的格式化算法

### [v1.2.0] - 远期规划

#### 🎯 高级功能
- **数据库连接**: 支持直接连接数据库执行SQL
- **结果展示**: SQL查询结果的表格展示
- **SQL验证**: 语法错误检查和提示
- **版本控制**: 集成Git版本控制功能
- **插件系统**: 支持第三方插件扩展

#### 🔧 架构升级
- **异步处理**: 使用异步IO提高响应性能
- **配置系统**: 完整的用户配置管理
- **日志系统**: 详细的操作日志记录
- **错误报告**: 自动错误收集和报告

---

## 版本命名规则

### 版本号格式
采用语义化版本控制（Semantic Versioning）：`MAJOR.MINOR.PATCH`

- **MAJOR**: 主版本号，不兼容的API修改
- **MINOR**: 次版本号，向下兼容的功能性新增
- **PATCH**: 修订号，向下兼容的问题修正

### 版本类型
- **正式版本**: 如 v1.0.0, v1.1.0
- **预发布版本**: 如 v1.1.0-beta.1, v1.1.0-rc.1
- **开发版本**: 如 v1.1.0-dev.20250101

---

## 反馈和建议

我们非常重视用户的反馈和建议，请通过以下方式联系我们：

### 📧 联系方式
- **邮箱**: zhongliang.liu@lixil.com
- **主题格式**: [SQL编辑器] 功能建议/Bug报告/使用问题

### 🐛 Bug报告
请提供以下信息：
- 操作系统和版本
- Python版本
- 详细的重现步骤
- 错误截图或日志
- 期望的行为描述

### 💡 功能建议
请描述：
- 建议的功能详情
- 使用场景和需求
- 预期的用户体验
- 优先级评估

### 🙏 致谢

感谢所有用户的支持和反馈，您的建议是我们持续改进的动力！

---

**最后更新**: 2025年1月  
**文档版本**: v1.0.0